name: Java CI
on:
  push:
    branches: [ main ]
    pull_request:
      branches: [ main ]
jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      # 下载源码
      - name: Checkout code
        uses: actions/checkout@v2
      # 打包构建
      - name: Build
        uses: actions/setup-java@v2
        with:
          java-version: '8'
          distribution: 'adopt'
      - run: mvn clean install
      - run: tar -zcvf release.tgz release/
      # 打印当前工作目录
      - run: pwd
        # 上传release目录作为制品
      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.1.3
        with:
           # 制品名称
           name: release-bin
           # 一个文件, 一个目录 或者 通配符模式 上传
           path: release
